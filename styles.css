/* ===================== VARIABLES ===================== */
:root {
  --bg: #0b1022;
  --panel: rgba(18,22,46,.7);
  --panel-solid: #141936;
  --panel-2: rgba(28,33,70,.65);
  --text: #ecf0ff;
  --muted: #a8b2d9;
  --accent: #6ea8ff;
  --accent-2: #8b6bff;
  --success: #2fd79a;
  --danger: #ff6b6b;
  --shadow: 0 8px 28px rgba(0,0,0,.35);
}

* {
  box-sizing: border-box;
}

html, body {
  height: 100%;
}

body {
  margin: 0;
  font-family: 'Inter', system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
  background:
    radial-gradient(1000px 700px at 10% -10%, #222a5b 0, transparent 60%),
    radial-gradient(900px 600px at 110% 5%, #342061 0, transparent 55%),
    linear-gradient(180deg, #0b1022 0%, #0e1530 100%);
  color: var(--text);
}
/* ===================== GLOBAL RESETS ===================== */

/* ===================== TOPBAR / HEADER ===================== */
.topbar {
  position: sticky;
  top: 0;
  z-index: 10;
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 10px 16px;
  background: linear-gradient(180deg, rgba(255,255,255,.08), rgba(255,255,255,.02));
  backdrop-filter: blur(10px);
  border-bottom: 1px solid rgba(255,255,255,.08);
}

.brand {
  display: flex;
  align-items: center;
  gap: 10px;
}
.brand .logo {
  font-size: 22px;
}
.brand h1 {
  font-size: 16px;
  font-weight: 700;
  letter-spacing: .5px;
  margin: 0;
}

.top-actions {
  display: flex;
  align-items: center;
  gap: 10px;
}
#helloUser {
  color: var(--muted);
  font-size: 13px;
}

.btn {
  border: 1px solid rgba(255,255,255,.12);
  background: var(--panel-2);
  color: var(--text);
  padding: 9px 14px;
  border-radius: 999px;
  cursor: pointer;
  transition: .15s;
  box-shadow: var(--shadow);
}
.btn:hover {
  transform: translateY(-1px);
}
.btn.primary {
  background: linear-gradient(90deg, var(--accent), var(--accent-2));
  border: none;
}
.btn.ghost {
  background: transparent;
  border-color: rgba(255,255,255,.18);
}
.btn.tiny {
  padding: 5px 10px;
  border-radius: 999px;
  font-size: 12px;
}
#clearChatBtn {
  background: linear-gradient(90deg, #ff4d4d, #ff6b6b);
  border: none;
  color: #fff;
  font-weight: 600;
  padding: 6px 14px;
  border-radius: 12px;
  display: flex;
  align-items: center;
  gap: 6px;
  margin-left: auto;
  cursor: pointer;
  text-shadow: 0 0 6px rgba(255, 100, 100, 0.9);
  box-shadow: 0 0 8px rgba(255, 80, 80, 0.8),
              0 0 15px rgba(255, 60, 60, 0.7);
  transition: background 0.2s, transform 0.15s, box-shadow 0.2s;
  
  /* 🔥 συνεχές pulse */
  animation: pulseDanger 1.6s infinite;
}

#clearChatBtn:hover {
  background: linear-gradient(90deg, #ff6b6b, #ff4d4d);
  transform: translateY(-2px) scale(1.05);
  box-shadow: 0 0 12px rgba(255, 100, 100, 1),
              0 0 24px rgba(255, 60, 60, 0.9),
              0 0 40px rgba(255, 0, 0, 0.8);
}

#clearChatBtn:active {
  transform: scale(0.95);
  box-shadow: 0 0 6px rgba(255, 100, 100, 0.7),
              0 0 12px rgba(255, 60, 60, 0.6);
}

/* 🔴 Keyframes για pulse animation */
@keyframes pulseDanger {
  0% {
    box-shadow: 0 0 6px rgba(255, 60, 60, 0.6),
                0 0 12px rgba(255, 40, 40, 0.5);
  }
  50% {
    box-shadow: 0 0 14px rgba(255, 80, 80, 0.9),
                0 0 28px rgba(255, 40, 40, 0.8),
                0 0 42px rgba(255, 0, 0, 0.7);
  }
  100% {
    box-shadow: 0 0 6px rgba(255, 60, 60, 0.6),
                0 0 12px rgba(255, 40, 40, 0.5);
  }
}
#clearChatBtn {
  margin-left: 10px;  /* ➝ δοκίμασε 10–14px */
}

/* ===================== BUTTONS ===================== */

/* ===================== CLEAR CHAT BUTTON ===================== */



/* ===================== YOUTUBE PLAYER (πάνω panel) ===================== */
.youtube-player {
  position: relative;
  background: var(--panel);
  text-align: center;
  height: 0;                /* κλειστό από default */
  overflow: hidden;
  transition: height 0.3s;
}

.youtube-player.active {
  height: 200px;            /* mini-player ύψος */
  padding: 8px;
  border-bottom: 1px solid rgba(255,255,255,.1);
}

.youtube-player.expanded {
  height: 380px;            /* expanded ύψος */
}

/* Iframe sizes */
.youtube-player iframe {
  width: 100%;
  max-width: 320px;         /* mini size */
  height: 180px;
  border-radius: 12px;
  box-shadow: var(--shadow);
  transition: all 0.3s;
}

.youtube-player.expanded iframe {
  max-width: 640px;         /* expanded size */
  height: 360px;
}

/* κουμπί close (✖) */
.close-player {
  position: absolute;
  top: 8px;
  right: 12px;
  background: rgba(0,0,0,0.5);
  border: none;
  color: white;
  font-size: 16px;
  border-radius: 50%;
  width: 28px;
  height: 28px;
  cursor: pointer;
  z-index: 10;
}
.close-player:hover {
  background: rgba(255,0,0,0.7);
}

/* κουμπί expand (⤢) */
.expand-player {
  position: absolute;
  top: 8px;
  left: 12px;
  background: rgba(0,0,0,0.5);
  border: none;
  color: white;
  font-size: 14px;
  border-radius: 50%;
  width: 28px;
  height: 28px;
  cursor: pointer;
  z-index: 10;
}
.expand-player:hover {
  background: rgba(0,200,255,0.7);
}

/* ===================== BUBBLE TEXT ===================== */
.text {
  margin: 2px 0;   /* μικρότερο κάθετο κενό */
  padding: 0;      /* κόβει extra padding */
  line-height: 1.3;
}

/* ===================== YOUTUBE PREVIEW (thumbnail μέσα στο chat) ===================== */
.yt-preview {
  display: inline-block;
  cursor: pointer;
  text-align: center;
  margin-top: 2px;
  margin-bottom: 2px;
}

.yt-preview img {
  max-width: 220px;
  border-radius: 8px;
  display: block;
  margin: 0 auto 2px;
  box-shadow: 0 4px 14px rgba(0,0,0,.4);
  transition: transform 0.2s, box-shadow 0.2s;
}

.yt-preview span {
  font-size: 12px;
  color: var(--accent);
  font-weight: 600;
  line-height: 1.2;
}

.yt-preview:hover img {
  transform: scale(1.03);
  box-shadow: 0 6px 18px rgba(0,0,0,.55);
}

.yt-preview:hover span {
  text-decoration: underline;
}

/* ===================== RESPONSIVE FIX ===================== */
@media (max-width: 600px) {
  .youtube-player.active {
    height: 180px; /* mini πιο χαμηλό */
  }
  .youtube-player.expanded {
    height: 220px; /* expanded πιο μικρό στο κινητό */
  }

  .youtube-player iframe {
    max-width: 100%;   /* γεμίζει το πλάτος */
    height: 160px;     /* mini ύψος σε mobile */
  }
  .youtube-player.expanded iframe {
    max-width: 100%;
    height: 200px;     /* expanded ύψος σε mobile */
  }
}

/* ===================== AUTH FORMS ===================== */
.auth {
  display: grid;
  place-items: center;
  height: calc(100vh - 54px);
  padding: 16px;
}
.auth-card {
  width: min(560px, 96vw);
  background: var(--panel);
  border: 1px solid rgba(255,255,255,.08);
  border-radius: 24px;
  padding: 20px;
  box-shadow: var(--shadow);
}

.tabs {
  display: flex;
  gap: 8px;
  margin-bottom: 14px;
  background: rgba(255,255,255,.04);
  padding: 6px;
  border-radius: 999px;
}
.tab {
  flex: 1;
  padding: 10px;
  background: transparent;
  border: 0;
  border-radius: 999px;
  cursor: pointer;
  color: var(--muted);
  font-weight: 600;
}
.tab.active {
  background: linear-gradient(90deg, rgba(110,168,255,.25), rgba(139,107,255,.25));
  color: var(--text);
}
.tab-panel {
  display: none;
}
.tab-panel.active {
  display: block;
}

label {
  display: block;
  font-size: 13px;
  color: var(--muted);
  margin: 10px 0 6px;
}
.input {
  width: 100%;
  padding: 12px 14px;
  border-radius: 14px;
  border: 1px solid rgba(255,255,255,.12);
  background: rgba(8,12,30,.85);
  color: var(--text);
  outline: none;
}
.row {
  display: flex;
  gap: 10px;
}
.link {
  background: none;
  border: none;
  color: var(--accent);
  margin-top: 6px;
  cursor: pointer;
}
.small {
  font-size: 12px;
}
.muted {
  color: var(--muted);
}


/* ===================== APP LAYOUT (Sidebar / Chat / Users) ===================== */
.app {
  display: grid;
  grid-template-columns: 280px 1fr 260px;
  grid-template-rows: calc(100vh - 54px);
}
.hidden {
  display: none;
}
.sidebar,
.users {
  background: var(--panel);
  border-right: 1px solid rgba(255,255,255,.08);
}
.users {
  border-left: 1px solid rgba(255,255,255,.08);
  border-right: none;
}
.sidebar {
  padding: 14px;
}
.sidebar-header,
.users-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
}


/* ===================== ROOMS LIST ===================== */
.rooms {
  margin-top: 12px;
  padding: 10px;
  display: flex;
  flex-direction: column;
  gap: 6px; /* πιο μαζεμένη λίστα */
  overflow: auto;
  height: calc(100% - 52px);
}
/* ===================== ROOMS HEADER POLISH ===================== */
.rooms-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 4px 10px;
  font-size: 12px;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  color: var(--muted); /* πιο απαλό αντί για καθαρό λευκό */
}

.rooms-header button {
  font-size: 11px;
  padding: 2px 8px;
  border-radius: 6px;
  background: var(--accent);
  border: none;
  cursor: pointer;
  transition: background 0.2s;
}

.rooms-header button:hover {
  background: var(--accent-2);
}


/* ===================== ROOM ITEM ===================== */
.room-item {
  display: flex;
  align-items: center;
  justify-content: space-between; /* σπρώχνει το counter δεξιά */
  padding: 8px 12px;
  border-radius: 10px;
  background: var(--panel);
  color: #fff;
  cursor: pointer;
  transition: background 0.2s, transform 0.1s;
}

.room-item:hover {
  background: #333a;
  transform: translateX(2px);
}

.room-count {
  font-size: 11px;
  font-weight: 600;
  background: linear-gradient(90deg, var(--accent), var(--accent-2));
  color: #fff;
  padding: 2px 6px;
  border-radius: 12px;
  box-shadow: 0 0 4px rgba(110, 168, 255, 0.4);
  line-height: 1;
}
/* ===================== CHAT ===================== */
.chat {
  display: flex;
  flex-direction: column;
  height: calc(100vh - 54px);
}
.room-title {
  padding: 12px 16px;
  border-bottom: 1px solid rgba(255,255,255,.08);
  font-weight: 700;
  background: var(--panel);
}
.messages {
  flex: 1;
  overflow: auto;
  padding: 16px;
  display: flex;
  flex-direction: column;
  gap: 10px;
}

/* ===================== CHAT MESSAGES ===================== */
.msg-row {
  display: flex;
  align-items: flex-end;
  gap: 8px;
  max-width: 85%;
}
.msg-row.mine {
  margin-left: auto;
  flex-direction: row-reverse;
}

.avatar.admin {
  background: linear-gradient(135deg, #ffb703, #ff5c5c);
}

.bubble {
  background: rgba(255, 255, 255, .08);
  border: 1px solid rgba(255, 255, 255, .12);
  padding: 10px 12px;
  border-radius: 18px;
  box-shadow: var(--shadow);
  position: relative;
}
.mine .bubble {
  background: linear-gradient(90deg, rgba(110,168,255,.25), rgba(139,107,255,.25));
}

.bubble::after {
  content: "";
  position: absolute;
  bottom: 4px;
  left: -6px;
  width: 10px;
  height: 10px;
  background: inherit;
  transform: rotate(45deg);
  border-left: inherit;
  border-bottom: inherit;
}
.mine .bubble::after {
  left: auto;
  right: -6px;
}

.meta {
  font-size: 11px;
  color: var(--muted);
  margin-bottom: 4px;
}

.bubble .text {
  font-size: 14px;
  line-height: 1.55;
  word-wrap: break-word;
  white-space: pre-wrap;   /* κρατάει τα Enter όπως τα γράφεις */
}

/* ===================== MESSAGE INPUT FORM ===================== */
.message-form {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 14px;
  border-top: 1px solid rgba(255,255,255,.08);
  background: var(--panel);
  overflow-x: hidden;
  margin: 0; /* σιγουριά να μην σπρώχνει */
}

/* Input wrapper */
.input-wrapper {
  position: relative;
  flex: 1;
  display: flex;
}

/* Emoji button μέσα στο input */
.input-wrapper .emoji-btn {
  position: absolute;
  left: 10px;
  top: 50%;
  transform: translateY(-50%);
  background: none;
  border: none;
  cursor: pointer;
  font-size: 20px;
  width: 28px;
  height: 28px;
  display: flex;
  align-items: center;
  justify-content: center;
  color: var(--text);
}

/* ===================== MESSAGE INPUT ===================== */
#messageInput {
  flex: 1;
  resize: none;
  border: none;
  outline: none;
  background: rgba(255,255,255,.06);
  color: var(--text, #eaeaea);
  font-size: 15px;
  line-height: 1.4;
  padding: 8px 12px 8px 42px; /* extra αριστερά για το emoji */
  border-radius: 999px;

  box-sizing: border-box;
  width: 100%;
  max-width: 100%;
  flex-shrink: 1; /* να μικραίνει αντί να σπρώχνει */

  min-height: 36px;
  max-height: 120px;
  overflow-y: auto;

  white-space: pre-wrap;
  overflow-wrap: break-word;
  word-break: break-word;
}

/* Send button */
.message-form .btn.primary {
  flex: 0 0 auto;
  padding: 0 16px;
  height: 40px;
  border-radius: 999px;
  white-space: nowrap; /* να μη σπάει */
}
/* ===================== EMOJI / GIF / STICKERS PANEL ===================== */
.emoji-panel {position:absolute;bottom:68px;left:22%; /* ή 16px */width:500px;max-width:96vw;background:#11162f;color:var(--text);border:1px solid rgba(255,255,255,.12);border-radius:14px;box-shadow:var(--shadow);display:none;flex-direction:column;z-index:50}.emoji-panel.show{display:flex}
  .emoji-header{display:flex;gap:8px;padding:8px;border-bottom:1px solid rgba(255,255,255,.08);align-items:center}.emoji-tabs{display:flex;gap:6px}.emoji-tab{padding:6px 10px;border-radius:10px;border:1px solid rgba(255,255,255,.12);background:rgba(255,255,255,.06);color:var(--muted);cursor:pointer;font-weight:600}.emoji-tab.active{background:linear-gradient(90deg,rgba(110,168,255,.25),rgba(139,107,255,.25));color:var(--text)}.emoji-search{flex:1}
  .emoji-body{max-height:200px;overflow:auto;padding:10px}.emoji-grid{display:grid;grid-template-columns:repeat(8,1fr);gap:8px}.emoji-item{font-size:22px;line-height:1;cursor:pointer;display:grid;place-items:center;padding:6px;border-radius:8px}.emoji-item:hover{background:rgba(255,255,255,.08)}
  .emoji-footer{padding:8px;border-top:1px solid rgba(255,255,255,.08);font-size:12px;color:var(--muted)}.disabled{opacity:.4;pointer-events:none}

/* ===================== USER LIST POLISH ===================== */
.users-sublist li {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 6px 8px;
  margin: 2px 0;
  border-radius: 8px;
  transition: background 0.2s;
}

.users-sublist li:hover {
  background: rgba(255, 255, 255, 0.05);
}

/* Avatar μέσα στη λίστα */
.users-sublist .avatar {
  width: 28px;
  height: 28px;
  border-radius: 50%;
  overflow: hidden;
  flex-shrink: 0;
  position: relative;
  border: 2px solid transparent;
}

/* Dot που κάθεται πάνω στο avatar */
.users-sublist li .status-dot {
  width: 8px;
  height: 8px;
  border-radius: 50%;
  margin-left: -12px;   /* φέρνει το dot πάνω στο avatar */
  border: 2px solid var(--panel);
}

/* Name block (όνομα + badge + typing) */
.name-block {
  display: flex;
  flex-direction: column;
  line-height: 1.2;
}

.name-block span {
  display: inline-flex;
  align-items: center;
  gap: 4px;
}

/* Typing κάτω από το όνομα */
.typing-indicator {
  font-size: 11px;
  color: var(--muted);
  margin-top: 2px;
  margin-left: 2px;
  display: inline-flex;
  align-items: center;
}



/* ===================== USER CATEGORY HEADERS ===================== */
.user-category {
  margin: 12px 0 6px;
  padding: 4px 10px;
  font-size: 11px;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  border-radius: 6px;
  text-align: center;
  color: var(--muted);
  background: rgba(255,255,255,0.05);
  border: 1px solid rgba(255,255,255,0.08);
}





.avatar.admin::after {
  content: "🛡️";
  position: absolute;
  bottom: -4px;
  right: -4px;
  font-size: 14px;
  text-shadow: 0 0 6px #ffb703, 0 0 12px #ffd166;
  animation: shield-glow 1.5s infinite alternate;
}

@keyframes shield-glow {
  from { text-shadow: 0 0 6px #ffb703, 0 0 12px #ffd166; }
  to   { text-shadow: 0 0 10px #ffd166, 0 0 20px #ffb703; }
}

.avatar.mod::after {
  content: "🛡️";
  position: absolute;
  bottom: -4px;
  right: -4px;
  font-size: 14px;
  text-shadow: 0 0 6px #06d6a0, 0 0 12px #118ab2;
  animation: mod-glow 1.5s infinite alternate;
}

@keyframes mod-glow {
  from { text-shadow: 0 0 6px #06d6a0, 0 0 12px #118ab2; }
  to   { text-shadow: 0 0 10px #118ab2, 0 0 20px #06d6a0; }
}

.avatar.vip::after {
  content: "⭐";
  position: absolute;
  bottom: -4px;
  right: -4px;
  font-size: 14px;
  text-shadow: 0 0 6px #7209b7, 0 0 12px #4361ee;
  animation: vip-glow 1.5s infinite alternate;
}

@keyframes vip-glow {
  from { text-shadow: 0 0 6px #7209b7, 0 0 12px #4361ee; }
  to   { text-shadow: 0 0 10px #4361ee, 0 0 20px #7209b7; }
}
.users-sublist li {
  display: flex;
  align-items: center;
  padding: 4px 6px;
  margin: 2px 0;
  border-radius: 6px;
  transition: background 0.2s;
}



.users-sublist li:hover {
  background: rgba(255, 255, 255, 0.05);
}

.users-sublist li .status-dot {
  width: 8px;
  height: 8px;
  border-radius: 50%;
  margin-right: 6px;
}

.users-sublist li span {
  margin-right: 6px;
}
.user-category:first-of-type {
  margin-top: 16px;
}

/* Online = πράσινο ring */
.avatar.online {
  border-color: #06d6a0;
  box-shadow: 0 0 6px rgba(6, 214, 160, 0.6);
}

/* Offline = γκρι ring */
.avatar.offline {
  border-color: #555;
}




.users-sublist {
  list-style: none;
  padding-left: 0;
  margin-left: 0;
}

.rooms .room {
  padding: 8px 12px;
  border-radius: 10px;
  background: var(--panel);
  color: #fff;
  cursor: pointer;
  transition: background 0.2s, transform 0.1s;
}

.rooms .room:hover {
  background: #333a;
  transform: translateX(2px);
}

.rooms .room.active {
  background: linear-gradient(135deg, #2196f3, #21cbf3);
  font-weight: 600;
  color: #fff;
  border-left: 4px solid #ffcc00;
  padding-left: 8px; /* ισορροπεί μετά το border */
}

/* ===================== BADGES ===================== */
/* ===================== USER BADGES POLISH ===================== */
.badge {
  font-size: 10px;
  font-weight: 600;
  padding: 2px 6px;
  border-radius: 8px;
  margin-left: auto;
  text-transform: uppercase;
  background: rgba(255,255,255,.12);
  border: 1px solid rgba(255,255,255,.18);
  color: var(--text);
}

/* Admin badge */
.badge.admin {
  background: linear-gradient(90deg, #ffb703, #fb8500);
  color: #000;
  box-shadow: 0 0 6px rgba(251,133,0,0.6);
}

/* Mod badge */
.badge.mod {
  background: linear-gradient(90deg, #06d6a0, #118ab2);
  color: #fff;
  box-shadow: 0 0 6px rgba(6,214,160,0.6);
}

/* VIP badge */
.badge.vip {
  background: linear-gradient(90deg, #7209b7, #4361ee);
  color: #fff;
  box-shadow: 0 0 6px rgba(114,9,183,0.6);
}

/* User badge */
.badge.user {
  background: rgba(255,255,255,.15);
  color: var(--text);
}



/* ===================== CONTEXT MENUS ===================== */
.context-menu {
  position: absolute;
  display: none;
  background: var(--panel);
  border: 1px solid rgba(255,255,255,.12);
  border-radius: 8px;
  box-shadow: var(--shadow);
  z-index: 1000;
}
.context-menu button {
  display: block;
  width: 100%;
  padding: 8px 14px;
  background: transparent;
  border: none;
  color: var(--danger);
  font-weight: 600;
  cursor: pointer;
  text-align: left;
}
.context-menu button:hover {
  background: rgba(255,0,0,0.15);
}


html, body {
  height: 100%;
  margin: 0;
  padding: 0;
  overflow: hidden; /* προαιρετικό */
}

.app {
  height: calc(100vh - 54px); /* χωρίς να αφήνει περιθώριο */
}

.chat {
  height: 100%; /* γεμίζει όλο το διαθέσιμο ύψος */
  display: flex;
  flex-direction: column;
}

.messages {
  flex: 1;
  overflow-y: auto;
}

.message-form {
  margin: 0;   /* σιγουριά να μη σπρώχνει */
  padding: 14px; /* μπορείς να μικρύνεις αν θες */
}
.users-sublist .avatar img {
  width: 100%;
  height: 100%;
  border-radius: 50%;
  object-fit: cover;
}

/* ==== BADGES ==== */

#messageInput {
  resize: none;
  overflow-y: hidden;   /* κρύβει το scrollbar */
  min-height: 36px;     /* αρχικό ύψος */
  max-height: 120px;    /* όριο για πολλά enters */
}

/* Reaction pop animation */
@keyframes reaction-pop {
  0%   { transform: scale(0.5); opacity: 0; }
  60%  { transform: scale(1.3); opacity: 1; }
  100% { transform: scale(1); opacity: 1; }
}

.reaction.pop {
  animation: reaction-pop 0.25s ease;
}
/* GIF / Stickers Grid */
#gifGrid, #stickerGrid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
  gap: 8px;
  max-height: 300px;   /* αν είναι πολλά → scroll */
  overflow-y: auto;
  padding: 8px;
}

.gif-item, .sticker-item {
  cursor: pointer;
  border-radius: 8px;
  overflow: hidden;
  transition: transform 0.2s;
}

.gif-item:hover, .sticker-item:hover {
  transform: scale(1.05);
}

.gif-item img, .sticker-item img {
  width: 100%;
  height: auto;
  display: block;
  border-radius: 8px;
}

/* Responsive tweaks */
@media (max-width: 600px) {
  #gifGrid, #stickerGrid {
    grid-template-columns: repeat(auto-fill, minmax(80px, 1fr));
    max-height: 200px;
  }
}
.search-box {
  display: flex;
  gap: 6px;
  margin: 8px;
}

.search-box .input {
  flex: 1;
}

.search-box button {
  padding: 6px 12px;
  border: none;
  border-radius: 6px;
  background: var(--accent);
  color: #fff;
  cursor: pointer;
  transition: background 0.2s;
}

.search-box button:hover {
  background: var(--accent-2);
}
/* --- PATCH μικρότερο topbar --- */
.topbar {
  padding: 6px 12px; /* λιγότερο padding πάνω-κάτω */
}

.topbar .brand .logo {
  font-size: 18px; /* πιο μικρό */
}

.topbar .brand h1 {
  font-size: 14px;
}

.topbar #helloUser {
  font-size: 12px; /* πιο μικρό "Hello, MysteryMan!" */
}

/* avatar δεξιά */
.topbar img {
  max-height: 48px;  /* αντί για ~80px που είναι τώρα */
  border-radius: 10px;
}
/* === SCROLL ΓΙΑ ΤΗΝ USER LIST === */
#usersList {
  flex: 1;
  max-height: calc(100vh - 180px); /* αφήνει χώρο για το profile πάνω */
  overflow-y: auto;
  padding-right: 6px;
}

/* Προαιρετικό: scrollbar style */
#usersList::-webkit-scrollbar {
  width: 6px;
}
#usersList::-webkit-scrollbar-thumb {
  background: var(--accent-2);
  border-radius: 10px;
}
#usersList::-webkit-scrollbar-track {
  background: transparent;
}
aside.users {
  display: flex;
  flex-direction: column;
}
button::after {
  content: none !important;
}
.users hr {
  border: none;
  height: 1px;
  background: linear-gradient(90deg, transparent, rgba(110,168,255,0.6), transparent);
  margin: 8px 0;
}

/* ===================== DIALOGS ===================== */
dialog{background:var(--panel-solid);color:var(--text);border:1px solid rgba(255,255,255,.12);border-radius:16px;padding:16px}dialog::backdrop{background:rgba(0,0,0,.5)}

/* ===================== REACTIONS ===================== */
.reactions {
  display: flex;
  gap: 6px;
  margin-top: 4px;
  font-size: 14px;
}

/* Κουμπί 🙂 που ανοίγει το popup */
.reaction-toggle {
  background: #219ebc;
  color: #fff;
  border-radius: 50%;
  width: 28px;
  height: 28px;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  margin-top: 0; /* ώστε να κάθεται στην ίδια ευθεία */
  font-size: 18px;
  transition: background 0.2s, transform 0.1s;
}

/* Reactions κάτω από το μήνυμα (❤️ 😂 😮 😡 …) */
.reaction {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  font-size: 16px;
  padding: 4px 8px;
  border-radius: 16px;
  color: #000;
  margin: 2px;
  cursor: pointer;
  height: 28px;     /* ίδιο ύψος με το 🙂 */
  line-height: 1;   /* για να μην μεγαλώνει το κουτί */
}
/* Χρώματα για reactions ανά σύμβολο */
.reaction[data-symbol="👍"] {
  background: #2196f3;  /* μπλε */
  color: #fff;
}

.reaction[data-symbol="❤️"] {
  background: #e53935;  /* κόκκινο */
  color: #fff;
}

.reaction[data-symbol="😂"] {
  background: #ffeb3b;  /* κίτρινο */
  color: #000;
}

.reaction[data-symbol="😮"] {
  background: #ff9800;  /* πορτοκαλί */
  color: #fff;
}

.reaction[data-symbol="😢"] {
  background: #64b5f6;  /* ανοιχτό μπλε */
  color: #fff;
}

.reaction[data-symbol="👎"] {
  background: #9e9e9e;  /* γκρι */
  color: #fff;
}

.reaction[data-symbol="😡"] {
  background: #d32f2f;  /* σκούρο κόκκινο */
  color: #fff;
}


.reaction-toggle:hover {
  background: #126782;
  transform: scale(1.1);
}
/* ===================== GIF PICKER ===================== */
#gifBtn{ margin-right: .5rem; }
#gifModal .modal-backdrop{
  position: fixed; inset: 0; background: rgba(0,0,0,.4);
}
#gifModal .modal-content{
  position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%);
  width: min(900px, 92vw); max-height: 80vh; overflow: hidden;
  background: var(--panel, #1f1f23); color: var(--text, #eaeaea);
  border-radius: 16px; box-shadow: 0 10px 30px rgba(0,0,0,.5);
  display: flex; flex-direction: column;
}
#gifModal .modal-header{
  display: flex; align-items: center; justify-content: space-between;
  padding: 12px 16px; border-bottom: 1px solid rgba(255,255,255,.08);
}
#gifModal .modal-search{
  display: flex; gap: 8px; padding: 12px 16px; border-bottom: 1px solid rgba(255,255,255,.06);
}
#gifModal .modal-search input{
  flex: 1; padding: 10px 12px; border-radius: 12px; border: 1px solid rgba(255,255,255,.08);
  background: rgba(255,255,255,.06); color: inherit; outline: none;
}
#gifResults.gif-grid{
  padding: 12px; display: grid;
  grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
  gap: 10px; overflow-y: auto; flex: 1;
}
#gifResults .gif-item{
  cursor: pointer; border-radius: 12px; overflow: hidden; position: relative;
  border: 1px solid rgba(255,255,255,.06);
}
#gifResults .gif-item img{
  width: 100%; height: 150px; object-fit: cover; display: block;
}
#gifResults .gif-item:hover{ outline: 2px solid rgba(255,255,255,.25); }

/* Inline GIFs in messages */
.bubble .msg-gif{max-width: 280px; width: 100%; height: auto; border-radius: 12px; display:block; margin-top:8px}
/* Align GIF button same as emoji */
.emoji-btn#gifBtn{filter:hue-rotate(40deg); font-weight:700}

/* GIF tab inside emoji panel */

#gifGrid .gif-item{cursor:pointer;border-radius:12px;overflow:hidden;border:1px solid rgba(255,255,255,.06)}
#gifGrid .gif-item img{width:100%;height:120px;object-fit:cover;display:block}

/* --- GIF grid upgrades --- */
#gifGrid { 
  display: grid; 
  grid-template-columns: repeat(auto-fill, minmax(120px, 1fr)); 
  gap: 10px; 
}
#gifGrid .gif-item {
  position: relative;
  aspect-ratio: 1 / 1;
  border-radius: 14px;
  overflow: hidden;
  border: 1px solid rgba(255,255,255,.08);
  background: rgba(255,255,255,.05);
}
#gifGrid .gif-item img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  display: block;
}
#gifGrid .gif-item:hover { outline: 2px solid rgba(255,255,255,.22); }
#gifGrid .gif-item:active { transform: scale(.98); }

/* Place search button inline */
#emojiPanel .emoji-header { display: flex; align-items: center; gap: 8px; }
#emojiPanel .emoji-header .emoji-search { flex: 1; }
#gifSearchBtn { padding: 8px 10px; border-radius: 10px; border: 1px solid rgba(255,255,255,.12); background: rgba(255,255,255,.08); color: inherit; cursor: pointer; }
#gifSearchBtn:hover { background: rgba(255,255,255,.12); }

#unifiedSearchBtn { padding: 8px 10px; border-radius: 10px; border: 1px solid rgba(255,255,255,.12); background: rgba(255,255,255,.08); color: inherit; cursor: pointer; }
#unifiedSearchBtn:hover { background: rgba(255,255,255,.12); }
#emojiPanel .emoji-header { display: flex; align-items: center; gap: 8px; }
#emojiPanel .emoji-header .emoji-search { flex: 1; }



/* ===================== STICKERS ===================== */
#stickerGrid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
  gap: 10px;
}
#stickerGrid .sticker-item {
  position: relative;
  aspect-ratio: 1 / 1;
  border-radius: 14px;
  overflow: hidden;
  border: 1px solid rgba(255,255,255,.08);
  background: rgba(255,255,255,.05);
  display:flex; align-items:center; justify-content:center;
}
#stickerGrid .sticker-item img {
  max-width: 100%;
  max-height: 100%;
  display: block;
}
/* Show active body inside panel */
.emoji-body{display:none}
.emoji-panel.show .emoji-body.active{display:block}

.reaction-toggle {
  position: relative;
}

.reaction-menu {
  position: absolute;
  bottom: 35px;
  left: 0;
  display: none;
  flex-direction: row;
  gap: 6px;
  background: #fff;
  border: 1px solid #ccc;
  border-radius: 8px;
  padding: 6px 8px;
  box-shadow: 0 2px 6px rgba(0,0,0,0.2);
  z-index: 200;
}

.reaction-option {
  cursor: pointer;
  font-size: 18px;
  padding: 2px;
  transition: transform 0.1s;
}

.reaction-option:hover {
  transform: scale(1.3);
}

.bubble.huge-emoji .text {
  font-size: clamp(1.8rem, 4vw, 2.6rem); /* πιο safe range */
  line-height: 1.2;
  text-align: left;
  animation: pop 0.25s ease;
}


@keyframes pop {
  0% { transform: scale(0.7); }
  70% { transform: scale(1.2); }
  100% { transform: scale(1); }
}
.emoji-pop {
  position: absolute;
  font-size: 20px;
  pointer-events: none;
  animation: pop-fall 0.6s forwards;
}

@keyframes pop-fall {
  0% { transform: translateY(-20px) scale(0.5); opacity: 0; }
  50% { transform: translateY(-40px) scale(1.2); opacity: 1; }
  100% { transform: translateY(0) scale(1); opacity: 0; }
}
/* ===================== TOAST NOTIFICATIONS ===================== */
.toast{position:fixed;bottom:14px;left:50%;transform:translateX(-50%);background:var(--panel-2);border:1px solid rgba(255,255,255,.12);padding:10px 14px;border-radius:12px;opacity:0;pointer-events:none;transition:.25s}.toast.show{opacity:1}
  .messages::-webkit-scrollbar,.rooms::-webkit-scrollbar,.users-list::-webkit-scrollbar,.emoji-body::-webkit-scrollbar{width:10px}
  .messages::-webkit-scrollbar-thumb,.rooms::-webkit-scrollbar-thumb,.users-list::-webkit-scrollbar-thumb,.emoji-body::-webkit-scrollbar-thumb{background:rgba(255,255,255,.12);border-radius:10px}
  @media (max-width:980px){.app{grid-template-columns:1fr;grid-template-rows:auto}.sidebar,.users{display:none}.emoji-panel{left:8px;right:8px;width:auto}}
 
/* ===================== SEARCH BOX ===================== */

/* ===================== RESPONSIVE (Media Queries) ===================== */

/* ===================== PATCHES / FIXES ===================== */
.users {
  font-size: 0; /* εξαφανίζει την ορφανή τελίτσα */
}

.users * {
  font-size: 14px; /* κανονικό μέγεθος για όλα τα παιδιά */
}

#usersList {
  margin-top: -13px; /* ανάσα κάτω από το κουμπί Αποθήκευση */
}

/* ===================== USER ROLES / AVATARS ===================== */
.avatar {
  position: relative;
  width: 32px;
  height: 32px;
  border-radius: 50%;
  overflow: hidden;
  flex-shrink: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  background: #444;
  color: #fff;
  margin-right: 8px;
  border: 2px solid transparent; /* default */
}
.avatar img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  border-radius: 50%;
}

/* ===================== NAME + TYPING WRAPPER ===================== */
.name-wrapper {
  display: flex;
  flex-direction: column;   /* κάθετα name, badge, typing */
  line-height: 1.2;
  margin-left: 6px;         /* μικρό κενό από το avatar/dot */
}

.name-wrapper span {
  display: inline-flex;
  align-items: center;
  gap: 4px;  /* κενό ανάμεσα σε name και badge */
}

/* ===================== TYPING INDICATOR ===================== */
.typing-indicator {
  font-size: 11px;
  color: var(--muted);
  margin-top: 2px;
  margin-left: 2px;
  display: inline-flex;
  align-items: center;
}

/* 3 dot animation */
.typing-indicator::after {
  content: '';
  display: inline-block;
  width: 12px;
  text-align: left;
  animation: dots steps(4, end) 1.5s infinite;
}

@keyframes dots {
  0%   { content: ''; }
  25%  { content: '.'; }
  50%  { content: '..'; }
  75%  { content: '...'; }
  100% { content: ''; }
}
/* ===================== RESPONSIVE CHAT FIX (MOBILE) ===================== */
@media (max-width: 600px) {
  body {
    height: 100vh;
    display: flex;
    flex-direction: column;
  }

  .app {
    display: flex;
    flex-direction: column;
    flex: 1;
    height: 100vh;
    overflow: hidden; /* να μην ξεχειλώνει */
  }

  .chat {
    display: flex;
    flex-direction: column;
    flex: 1;
    height: 100%;
  }

  .messages {
    flex: 1;
    overflow-y: auto; /* scroll για τα μηνύματα */
    padding: 8px;
  }

  .message-form {
    flex-shrink: 0;
    padding: 8px;
    background: var(--panel-2, #2a2d3a);
    border-top: 1px solid rgba(255,255,255,0.1);
  }
}
